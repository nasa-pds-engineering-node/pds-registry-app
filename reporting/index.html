<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.1 from src/site/xdoc/reporting/index.xml.vm at 2020-11-18
 | Rendered using Apache Maven Fluido Skin 1.8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.1" />
    <title>Registry Application &#x2013; Reporting</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.8.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-1.8.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="https://pds.nasa.gov" id="bannerLeft"><img src="../images/pds_banner.png"  alt="" width="500"/></a></div>
          <div class="pull-right"><a href="https://github.com/NASA-PDS/pds-registry-app" id="bannerRight"><h2>PDS Registry</h2>
</a></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2020-11-18<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 0.2.1</li>
      <li class="pull-right"><a href="https://github.com/NASA-PDS/pds-registry-app" class="externalLink" title="Registry App Github Repo">Registry App Github Repo</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Software Documentation</li>
    <li><a href="../index.html" title="About PDS Registry Application"><span class="none"></span>About PDS Registry Application</a></li>
    <li><a href="../install/index.html" title="Installation"><span class="icon-chevron-down"></span>Installation</a>
     <ul class="nav nav-list">
      <li><a href="../install/java.html" title="Java"><span class="none"></span>Java</a></li>
      <li><a href="../install/es-dev.html" title="Elasticsearch - Quick Start"><span class="none"></span>Elasticsearch - Quick Start</a></li>
      <li><a href="../install/tools.html" title="Tools (Manager, Harvest)"><span class="none"></span>Tools (Manager, Harvest)</a></li>
      <li><a href="../install/initialize.html" title="Initialize the Registry"><span class="none"></span>Initialize the Registry</a></li>
      <li><a href="../install/test.html" title="Test your deployment"><span class="none"></span>Test your deployment</a></li>
     </ul></li>
    <li><a href="../operate/index.html" title="Operation"><span class="icon-chevron-down"></span>Operation</a>
     <ul class="nav nav-list">
      <li><a href="../operate/common-ops.html" title="Common Operations"><span class="none"></span>Common Operations</a></li>
      <li><a href="../operate/test-vs-prod.html" title="Test vs Prod"><span class="none"></span>Test vs Prod</a></li>
      <li><a href="../operate/harvest.html" title="Harvest"><span class="none"></span>Harvest</a></li>
      <li><a href="../operate/reg-manager.html" title="Registry Manager"><span class="none"></span>Registry Manager</a></li>
      <li><a href="../operate/reg-custom.html" title="Registry Customization"><span class="none"></span>Registry Customization</a></li>
     </ul></li>
    <li><a href="../prod/index.html" title="Production Deployment"><span class="icon-chevron-down"></span>Production Deployment</a>
     <ul class="nav nav-list">
      <li><a href="../prod/es-vm.html" title="Elasticsearch (VM)"><span class="none"></span>Elasticsearch (VM)</a></li>
     </ul></li>
    <li><a href="../security/index.html" title="Security"><span class="icon-chevron-down"></span>Security</a>
     <ul class="nav nav-list">
      <li><a href="../security/proxy.html" title="Load Balancer & Proxy"><span class="none"></span>Load Balancer & Proxy</a></li>
      <li><a href="../security/es.html" title="Elasticsearch"><span class="none"></span>Elasticsearch</a></li>
      <li><a href="../security/reg-mgr.html" title="Registry Manager"><span class="none"></span>Registry Manager</a></li>
     </ul></li>
    <li><a href="../index.html#Support" title="Support"><span class="none"></span>Support</a></li>
   <li class="nav-header">Downloads</li>
    <li><a href="https://github.com/NASA-PDS/pds-registry-app/releases/download/0.2.1/pds-registry-app-0.2.1-bin.tar.gz" class="externalLink" title="Current Release (tar.gz)"><span class="none"></span>Current Release (tar.gz)</a></li>
    <li><a href="https://github.com/NASA-PDS/pds-registry-app/releases/download/0.2.1/pds-registry-app-0.2.1-bin.zip" class="externalLink" title="Current Release (zip)"><span class="none"></span>Current Release (zip)</a></li>
    <li><a href="https://pds-engineering.jpl.nasa.gov/content/pds4-software" class="externalLink" title="Past Releases"><span class="none"></span>Past Releases</a></li>
   <li class="nav-header">Change Log</li>
    <li><a href="../" title="TBD"><span class="none"></span>TBD</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >



<section>
<h2><a name="Reporting_.26_Visualization"></a>Reporting &amp; Visualization</h2>


<p>
</p>
<ul>
  
<li><a href="#Banana">Lucidworks Banana</a></li>
  
<ul>
    
<li><a href="#Installation">Installation</a></li>
    
<li><a href="#UI">UI Quick Start</a></li>
  </ul>
  
<li><a href="#BananaKibana">Banana vs Kibana</a></li>
</ul>



<p>
Current version of PDS Registry uses Apache Solr to store data.
To create simple reports and visualizations you can utilize 
<a class="externalLink" href="https://github.com/lucidworks/banana" target="_blank">Lucidworks Banana</a>.
</p>
</section>

<a name="Banana"></a><section id="Banana">
<h2><a name="Lucidworks_Banana"></a>Lucidworks Banana</h2>

<p>
Banana is an open source project forked from an old Kibana version. 
</p>

<p>
NOTE: The project is in maintenance mode. 
There is almost no documentation or other online resources to get any help.
</p>


<p style="color:red;">
<b>Security WARNING:</b> Banana is a JavaScript application which requires direct access to Solr APIs.
Run it only on a private LAN.
</p>

<a name="Installation"></a><section id="Installation">
<h3><a name="Installation_in_NGINX"></a>Installation in NGINX</h3>

<p>
Banana is a JavaScript application writtent in AngularJS v1.0.8 and can be installen in any web server.
The following instructions are for NGINX server.
</p>


<p>
<b>Step 1: Download and install Banana web app</b> 
</p>

<p>
Download <a class="externalLink" href="https://github.com/lucidworks/banana/releases/tag/v1.6.26">latest source release</a>
and extract it to some folder such as <i>/tmp</i>. 
</p>

<p>
Create a directory for Banana web application, such as <i>/opt/nginx/apps/banana</i>.
</p>

<p>
Copy content of <i>/tmp/banana-1.6.26/src</i> directory to <i>/opt/nginx/apps/banana</i>.
</p>


<p>
<b>Step 2: Configure Solr</b>
</p>


<p>
Create &quot;banana-int&quot; collection for storing Banana dashboards in Solr.
</p>

<div class="source"><pre class="prettyprint">
$SOLR_HOME/bin/solr create -c banana-int
</pre></div>


<p>
<b>Step 3: Configure NGINX</b>
</p>


<p>
NOTE: Banana is calling Solr APIs directly from a web browser.
For this to work, you either have to enable cross-origin resource sharing (CORS) for Solr or use a reverse proxy.
In the following example we configured reverse proxy for <i>/solr</i> location, so both <i>/banana</i>
and <i>/solr</i> urls are available on the same host.
</p>


<p style="color:red;">
<b>Security WARNING:</b>In this configuration, all Solr APIs are accessible through <i>/solr/</i> URL.
</p>


<div class="source"><pre class="prettyprint">
http {
    ...
    upstream solr-app {
        server localhost:8983;
    }

    server {
        listen       80;
        server_name  _;

        location /solr {
            proxy_pass http://solr-app/solr;
        }

        location /banana {
            root   /opt/nginx/apps;
            index  index.html;
        }
    }
}
</pre></div>


<p>
<b>Step 4: Test Installation</b>
</p>


<p>
In a web browser go to <i>/banana</i> URL on your NGINX server, for example, <i>http://www.test.local/banana</i>.
You should see a web page similar to this.
</p>

<p>
<img src="../images/banana-new.png" style="width:55em;" alt="" />
</p>


<p>
<b>Troubleshooting</b>
</p>


<p>
Banana is a JavaScript application. You can see error messages in your web browser &quot;developer console&quot;.
</p>

</section>



<a name="UI"></a><section id="UI">
<h3><a name="Banana_UI_Quick_Start"></a>Banana UI Quick Start</h3>

<p>
To create new dashboard, click &quot;New&quot; icon in the top menu, then select &quot;Non time-series dashboard&quot;.
</p>


<p>
<img src="../images/banana-new-db-1.png" style="width:30em;" alt="" />
</p>


<p>
On the next screen enter Solr URL &quot;/solr/&quot; and collection name &quot;registry&quot;.
</p>


<p>
NOTE: Because we are using NGINX reverse proxy, we entered relative URL &quot;/solr/&quot;.
You can enter any URL, such as &quot;http://my-solr.my-site.com/solr/&quot;, 
but it will only work if CORS is enabled for that URL (there should be the following header in each Solr response: 
'Access-Control-Allow-Origin' = '*').
</p>


<p>
<img src="../images/banana-new-db-2.png" style="width:50em;" alt="" />
</p>


<p>
Now you should see your new dashboard with several default panels of different type, such as query, hits, filtering, and table.
</p>


<p>
<img src="../images/banana-new-db-3.png" style="width:60em;" alt="" />
</p>


<p>
The panel type is shown in the upper right corner of each panel. The &quot;EVENTS&quot; panel should display conents of &quot;registry&quot; collection.
You can customize existing panel, delete or add new panels.
</p>


<p>
To create a new panel, click the plus sign next to the filtering panel. Select &quot;terms&quot; panel type. 
This panel type will use faceted query to group data by a field given in &quot;field&quot; text box. Enter &quot;product_class&quot; in this box.
Also select &quot;pie&quot; style to create a pie chart. You can also check &quot;Donut&quot; checkbox to create a &quot;donut&quot; chart.
Click &quot;Add Panel&quot;.
</p>


<p>
<img src="../images/banana-pie-1.png" style="width:50em;" alt="" />
</p>


<p>
You should see a new panel similar to this.
</p>


<p>
<img src="../images/banana-pie-2.png" style="width:30em;" alt="" />
</p>

</section>



<a name="BananaKibana"></a><section id="BananaKibana">
<h3><a name="Banana_vs_Kibana"></a>Banana vs Kibana</h3>

<section>
<h4><a name="Sumary"></a>Sumary</h4>


<table border="0" class="table table-striped">

<tr class="a">
  
<th>Feature</th>
<th>Banana</th>
<th>Kibana</th>
</tr>

<tr class="b">
  
<td>Supported backends</td>
  
<td>Solr</td>
  
<td>Elasticsearch</td>
</tr>

<tr class="a">
  
<td>Architecture</td>
  
<td>Web browser UI (JavaScript) directly calling Solr APIs. <br />This creates cross-origin resource sharing (CORS) and Solr security issues.</td>
  
<td>Kibana web UI and Kibana server. <br />Kibana server is calling Elasticsearch APIs.</td>
</tr>

<tr class="b">
  
<td>Popularity</td>
  
<td>Not popular. Project is in maintenance mode.</td>
  
<td>Very popular. New features are released regularly. Commercial support is available.</td>
</tr>

<tr class="a">
  
<td>Documentation</td>
  
<td>Almost no documentation or other online resources.</td>
  
<td>Good documentation on Elastic web site, blogs, forums and other resources.</td>
</tr>

<tr class="b">
  
<td>Usability, Look and Feel</td>
  
<td>Outdated UI. Frequent JavaScript errors. Without documentation it is very hard to figure out 
which visualizations are available and how to use them. Basic charts look good. 
Long labels are not truncated and values (e.g., counts) can be shown in legends.</td>
  
<td>In general, Kibana has mothern UI which is easy to use, but I didn't like chart look and feel. 
Long labels are truncated in legends and in pie charts.</td>
</tr>

<tr class="a">
  
<td>Customization</td>
  
<td>Easy to customize colors, legend location, number precision.</td>
  
<td>I didn't find how to change chart colors. It is very hard to change number format / precision.</td>
</tr>

<tr class="b">
  
<td>Extensibility</td>
  
<td>Banana is a simple (small) AngularJS 1.0 application. You can write custom panels / visualizations in JavaScript (AngularJS).</td>
  
<td>Kibana plugin interface is available, but it changes frequently. A plugin version should match Kibana version.</td>
</tr>

<tr class="a">
  
<td>Application Size</td>
  
<td>Very small - 7MB</td>
  
<td>Huge - 1GB+</td>
</tr>
</table>

</section><section>
<h4><a name="Sample_Visualizations"></a>Sample Visualizations</h4>


<table border="0" class="table table-striped">

<tr class="a">
  
<th>Banana</th>
<th>Kibana</th>
</tr>

<tr class="b">
  
<td><img src="../images/banana-pie-2.png" style="width:30em;" alt="" /></td>
  
<td><img src="../images/es-pie-1.png" style="width:30em;" alt="" /></td>
</tr>

<tr class="a">
  
<td><img src="../images/banana-bar-2.png" style="width:30em;" alt="" /></td>
  
<td><img src="../images/es-bar-2.png" style="width:30em;" alt="" /></td>
</tr>
</table>


</section></section>

</section>



        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &#169;      2020..</p>
        </div>
      </div>
    </footer>
  </body>
</html>
